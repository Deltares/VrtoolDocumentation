<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Workflows &mdash; vrtool_docs  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            vrtool_docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../Installaties/index.html">Installaties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Preprocessing/index.html">Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../VRTool/index.html">VRTool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Postprocessing/index.html">Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Achtergronden/index.html">Achtergronden</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">vrtool_docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Workflows</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/Handleiding/Van beoordeling naar invoer/Workflows.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="workflows">
<h1>Workflows<a class="headerlink" href="#workflows" title="Permalink to this heading"></a></h1>
<section id="workflow-genereren-van-een-vakindeling-voor-de-vrtool">
<h2>Workflow Genereren van een vakindeling voor de VRTOOL<a class="headerlink" href="#workflow-genereren-van-een-vakindeling-voor-de-vrtool" title="Permalink to this heading"></a></h2>
<p>Op basis van de vakindeling invoerbestand (<code class="docutils literal notranslate"><span class="pre">Vakindeling.csv</span></code>) bestand kan vervolgens met de volgende python code een shapefile worden gegenereerd: <a class="reference external" href="https://github.com/Deltares/VRSuiteUtils/blob/main/preprocessing/workflows/generate_vakindeling.py"><code class="docutils literal notranslate"><span class="pre">generate_vakindeling_workflow.py</span></code></a> uit de <code class="docutils literal notranslate"><span class="pre">VRUtils</span></code> GitHub.</p>
<p>De shapefile van het betreffende traject wordt gedownload van de webserver van het Nationaal Basisbestand Primaire Waterkeringen (NBPW), en vervolgens conform de m-waarden wordt opgeknipt. Een aandachtspunt hier is dat de richting van het opgeknipte traject volgens <code class="docutils literal notranslate"><span class="pre">Vakindeling.csv</span></code> anders kan zijn dan de richting van het traject volgens (NBPW).</p>
<p><strong>Let op:</strong> De trajectlengte moet gelijk zijn aan de som van alle vaklengtes.</p>
<p>Het is ook mogelijk om het betreffende traject zelf in te voeren door ‘XXXXXX’</p>
<section id="draaien-van-de-berekeningen-voor-vakindeling">
<h3>Draaien van de berekeningen voor vakindeling<a class="headerlink" href="#draaien-van-de-berekeningen-voor-vakindeling" title="Permalink to this heading"></a></h3>
<p>Deze workflow kan worden aangeroepen vanuit de terminal (bijv. via Anaconda Prompt) door middel van het commando:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python &#39;/pad/naar/generate_vakindeling_workflow.py&#39; &#39;traject-1&#39; &#39;/pad/naar/vakindeling.csv&#39;
</pre></div>
</div>
<p>Waarbij:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'/pad/naar/generate_vakindeling_workflow.py'</span></code> vervangen moet worden met de pad naar de python code <code class="docutils literal notranslate"><span class="pre">generate_vakindeling_workflow.py</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'traject-1'</span></code> vervagen moet worden door de officiële trajectnaam.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'/pad/naar/vakindeling.csv'</span></code> vervangen moet worden met de pad naar <code class="docutils literal notranslate"><span class="pre">vakindeling.csv</span></code>.</p></li>
</ul>
</li>
</ul>
<p><strong>Let op</strong> dat de paden relatief zijn tot de locatie in de console.</p>
</section>
<section id="uitvoer-van-de-code-voor-vakindeling">
<h3>Uitvoer van de code voor vakindeling<a class="headerlink" href="#uitvoer-van-de-code-voor-vakindeling" title="Permalink to this heading"></a></h3>
<p>De uitvoer bestaat uit 2 bestanden die in dezelfde map als <code class="docutils literal notranslate"><span class="pre">vakindeling.csv</span></code> worden weggeschreven:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Vakindeling_traject.geojson</span></code> waarin de opgeknipte vakindeling is opgeslagen.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Vakindeling_traject.png</span></code> waarin een figuur met de vakindeling is opgeslagen.</p></li>
</ul>
<p>Wanneer beide bestaande zijn aangemaakt en de vakindeling van de figuur klopt met de verwachting is de code succesvol uitgevoerd.</p>
<p>Een voorbeeld van een vakindeling volgend uit de workflow is onderstaand weergegeven:
<img alt="Vakindeling voor dijktraject 38-1" src="../../_images/vakindeling.png" /></p>
</section>
</section>
<section id="workflow-hydra-ring">
<h2>Workflow Hydra-Ring<a class="headerlink" href="#workflow-hydra-ring" title="Permalink to this heading"></a></h2>
<p>Als voorbereiding op de analyses met de <code class="docutils literal notranslate"><span class="pre">VRTOOL</span></code> moet een aantal berekeningen gemaakt worden met <code class="docutils literal notranslate"><span class="pre">Hydra-Ring</span></code>. Als eerste moet de benodigde invoer worden klaargezet in het bestand <code class="docutils literal notranslate"><span class="pre">HR_default.csv</span></code>. Dit bevat alle informatie voor de berekeningen voor overslag en waterstand.
Het is ook mogelijk dit bestand automatisch te vullen op basis van een shapefile met beoordelingsgegevens, en de shapefile van de vakindeling.
Zie daarvoor de workflow <a class="reference internal" href="#link"><span class="xref myst">automatisch genereren van invoer voor Hydra-Ring berekeningen</span></a>.</p>
<section id="berekeningen-voor-waterstand">
<h3>Berekeningen voor waterstand<a class="headerlink" href="#berekeningen-voor-waterstand" title="Permalink to this heading"></a></h3>
<section id="voorbereiden-van-de-berekeningen-voor-waterstand">
<h4>Voorbereiden van de berekeningen voor waterstand<a class="headerlink" href="#voorbereiden-van-de-berekeningen-voor-waterstand" title="Permalink to this heading"></a></h4>
<p>Als input voor de <code class="docutils literal notranslate"><span class="pre">VRTOOL</span></code> moeten voor 2023 en 2100 frequentielijnen van de waterstand worden afgeleid. De locaties zijn opgenomen in het bestand HR_default.csv.
Daarnaast moet een map worden gemaakt met daarin de submappen 2023 en 2100, volgens de volgende structuur:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Waterstandsberekening
├── 2023/
└── 2100/
</pre></div>
</div>
<p>In de mappen moeten de juiste hydraulische database bestanden worden geplaatst. In 2023 voor WBI2017, in 2100 voor het gewenste klimaatscenario.
Dit betreft zowel een HRD database, een config database, en de HLCD database met de juiste statistiek.</p>
</section>
<section id="draaien-van-de-berekeningen-voor-waterstand">
<h4>Draaien van de berekeningen voor waterstand<a class="headerlink" href="#draaien-van-de-berekeningen-voor-waterstand" title="Permalink to this heading"></a></h4>
<p>Het draaien van de berekeningen wordt gedaan via <code class="docutils literal notranslate"><span class="pre">preprocessing/workflows/hydraring_waterlevel_workflow.py</span></code>.
Voor het draaien van de code moeten in de python code drie paden worden gespecificeerd:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">work_dir</span></code>: deze verwijst naar de hoofdfolder (<code class="docutils literal notranslate"><span class="pre">Waterstandsberekening</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HydraRing_path</span></code>: deze verwijst naar de installatiefolder van Hydra-Ring (meestal een submap van de installatiefolder van Riskeer)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">database_paths</span></code>: een <code class="docutils literal notranslate"><span class="pre">list</span></code> met daarin de subfolders waarin de hydraulische databases staan.</p></li>
</ul>
<p>Alle opgegeven paden moeten als pathlib.Path object worden opgegeven. Dus <code class="docutils literal notranslate"><span class="pre">Path(r'mijnpad')</span></code>. <strong>Let daarbij op</strong> dat niet afgesloten moet worden met een <code class="docutils literal notranslate"><span class="pre">\</span></code>.
Vervolgens kunnen door het runnen van <code class="docutils literal notranslate"><span class="pre">hydraring_waterlevel_workflow.py</span></code> alle waterstandsberekeningen worden uitgevoerd.</p>
<p>Deze workflow voor waterstandsberekeningen kan worden aangeroepen vanuit de terminal (bijv. via Anaconda Prompt) door middel van het commando:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python &#39;/pad/naar/hydraring_waterlevel_workflow&#39;
</pre></div>
</div>
<p>Waarbij <code class="docutils literal notranslate"><span class="pre">/pad/naar/hydraring_waterlevel_workflow</span></code> moet vervangen worden door de pad naar <code class="docutils literal notranslate"><span class="pre">hydraring_waterlevel_workflow.py</span></code> relatief aan de locatie in de console.</p>
</section>
<section id="uitvoer-van-de-code-berekeningen-voor-waterstand">
<h4>Uitvoer van de code berekeningen voor waterstand<a class="headerlink" href="#uitvoer-van-de-code-berekeningen-voor-waterstand" title="Permalink to this heading"></a></h4>
<p>Resultaten worden weggeschreven in subfolders met de naam van de doorsnede.</p>
</section>
<section id="interpreteren-en-verder-verwerken-van-de-uitvoer">
<h4>Interpreteren en verder verwerken van de uitvoer<a class="headerlink" href="#interpreteren-en-verder-verwerken-van-de-uitvoer" title="Permalink to this heading"></a></h4>
<p>Resultaat van de berekeningen zijn frequentielijnen voor 2023 en 2100.
Verdere instructies volgen.</p>
</section>
</section>
<section id="berekeningen-voor-overslag">
<h3>Berekeningen voor overslag<a class="headerlink" href="#berekeningen-voor-overslag" title="Permalink to this heading"></a></h3>
<section id="voorbereiden-van-de-berekeningen-voor-overslag">
<h4>Voorbereiden van de berekeningen voor overslag<a class="headerlink" href="#voorbereiden-van-de-berekeningen-voor-overslag" title="Permalink to this heading"></a></h4>
<p>Voor overslag zijn iets meer gegevens nodig. De structuur is identiek aan die van waterstandsberekeningen, maar nu moeten de gegevens in de volgende structuur worden opgegeven:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Waterstandsberekening
├── 2023/
├── 2100/
└── prfl/
</pre></div>
</div>
<p>In de folder <code class="docutils literal notranslate"><span class="pre">prfl</span></code> moeten profielbestanden worden opgenomen voor alle door te rekenen doorsnedes. De naam van het bestand moet daarbij overeenkomen met de doorsnede uit het *.csv invoer bestand.</p>
</section>
<section id="draaien-van-de-berekeningen-voor-overslag">
<h4>Draaien van de berekeningen voor overslag<a class="headerlink" href="#draaien-van-de-berekeningen-voor-overslag" title="Permalink to this heading"></a></h4>
<p>Verder werkt deze workflow identiek aan die van waterstand, via het bestand <code class="docutils literal notranslate"><span class="pre">hydraring_overflow_workflow.py</span></code>.</p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Deltares.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>